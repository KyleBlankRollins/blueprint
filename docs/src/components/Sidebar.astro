---
/**
 * Sidebar navigation component.
 * Uses Blueprint components: bp-heading, bp-link, bp-divider
 */
interface NavItem {
  label: string;
  href: string;
}

interface NavSection {
  title: string;
  items: NavItem[];
}

const navigation: NavSection[] = [
  {
    title: 'Getting Started',
    items: [
      { label: 'Introduction', href: '/getting-started/introduction' },
      { label: 'Installation', href: '/getting-started/installation' },
      { label: 'Theming', href: '/getting-started/theming' },
    ],
  },
  {
    title: 'Components',
    items: [
      { label: 'Accordion', href: '/components/accordion' },
      { label: 'Alert', href: '/components/alert' },
      { label: 'Avatar', href: '/components/avatar' },
      { label: 'Badge', href: '/components/badge' },
      { label: 'Breadcrumb', href: '/components/breadcrumb' },
      { label: 'Button', href: '/components/button' },
      { label: 'Card', href: '/components/card' },
      { label: 'Checkbox', href: '/components/checkbox' },
      { label: 'Color Picker', href: '/components/color-picker' },
      { label: 'Combobox', href: '/components/combobox' },
      { label: 'Date Picker', href: '/components/date-picker' },
      { label: 'Divider', href: '/components/divider' },
      { label: 'Drawer', href: '/components/drawer' },
      { label: 'Dropdown', href: '/components/dropdown' },
      { label: 'File Upload', href: '/components/file-upload' },
      { label: 'Heading', href: '/components/heading' },
      { label: 'Icon', href: '/components/icon' },
      { label: 'Input', href: '/components/input' },
      { label: 'Link', href: '/components/link' },
      { label: 'Menu', href: '/components/menu' },
      { label: 'Modal', href: '/components/modal' },
      { label: 'Multi-Select', href: '/components/multi-select' },
      { label: 'Notification', href: '/components/notification' },
      { label: 'Number Input', href: '/components/number-input' },
      { label: 'Pagination', href: '/components/pagination' },
      { label: 'Popover', href: '/components/popover' },
      { label: 'Progress', href: '/components/progress' },
      { label: 'Radio', href: '/components/radio' },
      { label: 'Select', href: '/components/select' },
      { label: 'Skeleton', href: '/components/skeleton' },
      { label: 'Slider', href: '/components/slider' },
      { label: 'Spinner', href: '/components/spinner' },
      { label: 'Stepper', href: '/components/stepper' },
      { label: 'Switch', href: '/components/switch' },
      { label: 'Table', href: '/components/table' },
      { label: 'Tabs', href: '/components/tabs' },
      { label: 'Tag', href: '/components/tag' },
      { label: 'Text', href: '/components/text' },
      { label: 'Textarea', href: '/components/textarea' },
      { label: 'Time Picker', href: '/components/time-picker' },
      { label: 'Tooltip', href: '/components/tooltip' },
      { label: 'Tree', href: '/components/tree' },
    ],
  },
];

const currentPath = Astro.url.pathname;
---

<aside class="sidebar">
  <nav class="sidebar-nav">
    {
      navigation.map((section, index) => (
        <div class="nav-section">
          <bp-heading level="2" size="xs" weight="semibold">
            {section.title}
          </bp-heading>
          <ul class="nav-list">
            {section.items.map((item) => (
              <li>
                <a
                  href={item.href}
                  class:list={[
                    'nav-link',
                    {
                      active:
                        currentPath === item.href ||
                        currentPath === item.href + '/',
                    },
                  ]}
                >
                  {item.label}
                </a>
              </li>
            ))}
          </ul>
          {index < navigation.length - 1 && <bp-divider />}
        </div>
      ))
    }
  </nav>
</aside>

<style>
  .sidebar {
    width: 260px;
    height: calc(100vh - 57px);
    position: sticky;
    top: 57px;
    overflow-y: auto;
    padding: 1.5rem;
    border-right: 1px solid var(--bp-color-border);
    background: var(--bp-color-surface);
  }

  .sidebar-nav {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .nav-section {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .nav-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .nav-link {
    display: block;
    padding: 0.375rem 0.75rem;
    border-radius: var(--bp-border-radius-md, 0.375rem);
    color: var(--bp-color-text-secondary);
    font-size: 0.875rem;
    transition: all 0.15s ease;
  }

  .nav-link:hover {
    background: var(--bp-color-surface-secondary);
    color: var(--bp-color-text);
  }

  .nav-link.active {
    background: var(--bp-color-primary-100);
    color: var(--bp-color-primary);
    font-weight: 500;
  }

  [data-theme='dark'] .nav-link.active {
    background: var(--bp-color-primary-900);
  }

  @media (max-width: 1024px) {
    .sidebar {
      display: none;
    }

    .sidebar-open .sidebar {
      display: block;
      position: fixed;
      left: 0;
      top: 57px;
      z-index: 99;
      width: 280px;
      box-shadow: var(--bp-shadow-lg);
    }
  }
</style>
